今天最难的一个实验就是用c语言显示字符串那个了，毕竟万事开头难。

作者是了解他所设计的可执行文件的格式的，所以用利用了其头部信息来将其装入内存，但我是用PE这种文件格式的，所以要改一改作者的代码

第一，要改代码段入口，将PE中代码段入口的值给出

第二，自定义ESP的值，因为PE是没有这个设定的，所以我自己设定了64*1024这个值

第三，数据段的设计，实际上我设计的数据段有两部分，最下面就是栈所占据的64*1024，然后就是PE中的.rdata段了，因此给程序和给api的ds_base是不一样的，一个直接给ds，一个要加上栈空间的大小。当然，到后来数据段还得囊括bss等段了。

第四，在应用程序中对_api_putstr0的参数要减去一个0x402000，这是PE的数据段的RVA，减去这个才能用到我们的os里面。

而接下来的画窗口的实验也不难，有了以上的基础后，加一个.bss也是很简单的，我就简单粗暴点，给数据段多分配0x4000的空间，再在_api_putstr0将参数减0x402000，就搞定了。

搞完所有实验还是有点累，毕竟把PE用成这个样子，但没办法，毕竟我的操作系统没搞虚拟内存，不然就很简单了。不过以上还是需要有些改进的地方吧，比如gcc指定一下链接地址，就不用在对_api_putstr0的参数要减去一个0x402000了。

总的来说，今天的实验还是有点难的，对于我这种没用作者文件格式和工具的人来说，还要更麻烦，而且今天做的进度还是慢了，希望明天的实验能简单点，能够让我再加快点进度。